<!DOCTYPE html>
<html>
    <head>

        <!--  This file has been downloaded from bootdey.com @bootdey on twitter -->
        <!--  All snippets are MIT license http://bootdey.com/license -->
        <!--  Edited by : Amar Plakalo -->
        <!--  Date: 07/11/2022 -->

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Online Discussion Forum | Home</title>
        <link rel="icon" type="image/x-icon" href="static/favicon-logo.png">
        <link rel="stylesheet" href="/static/css/custom_stylesheet.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <style>
            
            a
            {
                text-decoration:none;    
            }
            
            .text-primary, a.text-primary:focus, a.text-primary:hover 
            {
                color: #00ADBB!important;
            }
            
            .text-black, .text-hover-black:hover 
            {
                color: #000 !important;
            }
            
            .font-weight-bold 
            {
                font-weight: 700 !important;
            }

            .container
            {
                margin-top:40px;
            }

        </style>

    </head>

    <body>
      {% if session.get("name") %}
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a href="/"><img src="/static/student-discussion-logo.png" style="height:75px;width:75px;"></img>&nbsp;&nbsp;</a>
            <a class="navbar-brand" href="/">Student Discussion</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-item nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                    <a class="nav-item nav-link" href="/student_profile">Profile</a>
                    <a class="nav-item nav-link" href="/logout">Log Out</a>
                </div>
            </div>

        </nav>

        <div class="container">
          <div class="row justify-content-center align-items-center">
            <!-- Main content -->
            <div class="col-lg-9 mb-3">
              <div class="row text-left mb-5">
                <div class="col-lg-6 mb-3 mb-sm-0">
                  <select class="form-control form-control-lg bg-white bg-op-9 text-sm w-lg-50" data-toggle="select" tabindex="-98">
                    <option> Categories </option>
                  </select>
                </div>
                <div class="col-lg-6 text-lg-right">
                  <select class="form-control form-control-lg bg-white bg-op-9 ml-auto text-sm w-lg-50" data-toggle="select" tabindex="-98">
                      <option> Filter by </option>
                  </select>
                </div>
              </div>

              <a class="btn btn-lg btn-block btn-success rounded-0 py-4 mb-3 bg-op-6 roboto-bold" href="/render_forum_post" onclick="function1()">Create a Post</a>

              {% if collection_info.count() == 0 %}
              {% endif %}

              {% if collection_info.count() > 0 %}

                {% for document in collection_info %}

                  <div class="card row-hover pos-relative py-3 px-3 mb-3 border-warning border-top-0 border-right-0 border-bottom-0 rounded-0">
                    <div class="row align-items-center">

                      <div class="col-md-8 mb-3 mb-sm-0">
                        <h5>
                          <a href="{{url_for('view_topic', _id=document._id)}}" class="text-primary">{{ document.title_of_post }}</a>
                        </h5>
                        <p class="text-sm"><span class="op-6">Posted</span> <a class="text-black" href="#">0 minutes</a> <span class="op-6">ago by</span> <a class="text-black" href="{{url_for('viewing_profile', student_profile_email=document.author_of_post)}}">{{ document.author_of_post }}</a></p>
                        <div class="text-sm op-5"> <a class="text-black mr-2" href="#">Forum: Computer Science</a> </div>
                      </div>
                      <div class="col-md-4 op-7">
                        <div class="row text-center op-7">
                          <div class="col px-1"> <i class="ion-connection-bars icon-1x"></i> <span class="d-block text-sm"><a id="like_post_link" href="{{url_for('like_post', like_post_id=document._id)}}"><i class="fa fa-thumbs-up"></i></a>{{ document.number_of_likes }}</span> </div>
                          <div class="col px-1"> <i class="ion-ios-chatboxes-outline icon-1x"></i> <span class="d-block text-sm"><a id="dislike_post_link" href="{{url_for('dislike_post', dislike_post_id=document._id)}}"><i class="fa fa-thumbs-down"></i></a>{{ document.number_of_dislikes }}</span> </div>
                          <div class="col px-1"> <i class="ion-ios-eye-outline icon-1x"></i> <span class="d-block text-sm"><a id="share_post_link" href="#"><i class="fa fa-share"></i></a></span></div>
                        </div>
                      </div>
                    </div>
                    <br>
                    {% if session.get("name") == document.author_of_post %}
                      <a href="{{url_for('delete_topic', id_delete = document._id)}}" onclick="return delete_topic()"><i class="fa fa-trash"></i></a>
                      <a href="{{url_for('edit_topic', id_edit = document._id)}}"><i class="fa fa-edit"></i></i></a>
                    {% endif %}
                  </div>

                {% endfor %}

              {% endif %}
              
            </div>
          </div>
        </div>

      {% else %}

        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
          <a href="/"><img src="/static/student-discussion-logo.png" style="height:75px;width:75px;"></img>&nbsp;&nbsp;</a>
          <a class="navbar-brand" href="/">Student Discussion</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <div class="navbar-nav">
                  <a class="nav-item nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                  <a class="nav-item nav-link" href="/login_account">Sign In</a>
                  <a class="nav-item nav-link" href="/register_account">Register</a>
              </div>
          </div>

        </nav>


        <div class="container">
          <div class="row justify-content-center align-items-center">
            <!-- Main content -->
            <div class="col-lg-9 mb-3">
              <div class="row text-left mb-5">
                <div class="col-lg-6 mb-3 mb-sm-0">
                  <select class="form-control form-control-lg bg-white bg-op-9 text-sm w-lg-50" data-toggle="select" tabindex="-98">
                    <option> Categories </option>
                  </select>
                </div>
                <div class="col-lg-6 text-lg-right">
                  <select class="form-control form-control-lg bg-white bg-op-9 ml-auto text-sm w-lg-50" data-toggle="select" tabindex="-98">
                      <option> Filter by </option>
                  </select>
                </div>
              </div>

              {% if collection_info.count() == 0 %}
              {% endif %}

              {% if collection_info.count() > 0 %}

                {% for document in collection_info %}

                  <div class="card row-hover pos-relative py-3 px-3 mb-3 border-warning border-top-0 border-right-0 border-bottom-0 rounded-0">
                    <div class="row align-items-center">

                      <div class="col-md-8 mb-3 mb-sm-0">
                        <h5>
                          <a href="{{url_for('view_topic', _id=document._id)}}" class="text-primary">{{ document.title_of_post }}</a>
                        </h5>
                        <p class="text-sm"><span class="op-6">Posted</span> <a class="text-black" href="#">20 minutes</a> <span class="op-6">ago by</span> <a class="text-black" href="{{url_for('viewing_profile', student_profile_email=document.author_of_post)}}">{{ document.author_of_post }}</a></p>
                        <div class="text-sm op-5"> <a class="text-black mr-2" href="#">Forum: Computer Science</a> </div>
                      </div>
                      <div class="col-md-4 op-7">
                        <div class="row text-center op-7">
                          <div class="col px-1"> <i class="ion-connection-bars icon-1x"></i> <span class="d-block text-sm"><a id="like_post_link" href="{{url_for('like_post', like_post_id=document._id)}}"><i class="fa fa-thumbs-up"></i></a>{{ document.number_of_likes }}</span> </div>
                          <div class="col px-1"> <i class="ion-ios-chatboxes-outline icon-1x"></i> <span class="d-block text-sm"><a id="dislike_post_link" href="{{url_for('dislike_post', dislike_post_id=document._id)}}"><i class="fa fa-thumbs-down"></i></a>{{ document.number_of_dislikes }}</span> </div>
                          <div class="col px-1"> <i class="ion-ios-eye-outline icon-1x"></i> <span class="d-block text-sm"><a id="share_post_link" href="#"><i class="fa fa-share"></i></a></span></div>
                        </div>
                      </div>
                    </div>
                    <br>
                  </div>

                {% endfor %}

              {% endif %}
              
            </div>
          </div>
        </div>



      {% endif %}

      <script src="{{url_for('static', filename='main.js')}}"></script>
    </body>
</html>