<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <title>Online Discussion Forum | View Post</title>
	<link rel="icon" type="image/x-icon" href="{{url_for('static', filename= 'favicon-logo.png')}}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/static/css/custom_stylesheet.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	
	<style type="text/css">

		#reply_content
		{
			margin:auto;
			min-width:200px;
			max-width:100%;
			min-height:50px;
			height:100%;
			width:100%;
		}
									
		body
		{
			text-align: left;
			background:#eee;
			color: #708090;
		}
		
		.mt-100
		{
			margin-top:100px
		}
		
		.card
		{
			box-shadow: 0 0.46875rem 2.1875rem rgba(4,9,20,0.03), 0 0.9375rem 1.40625rem rgba(4,9,20,0.03), 0 0.25rem 0.53125rem rgba(4,9,20,0.05), 0 0.125rem 0.1875rem rgba(4,9,20,0.03);
			border-width: 0;
			transition: all .2s
		}
		
		.card-header:first-child
		{
			border-radius: calc(.25rem - 1px) calc(.25rem - 1px) 0 0
		}
		
		.card-header
		{
			display: flex;
			align-items: center;
			border-bottom-width: 1px;
			padding-top: 0;
			padding-bottom: 0;
			padding-right: .625rem;
			height: 3.5rem;
			text-transform: uppercase;
			background-color: #fff;
			border-bottom: 1px solid rgba(26,54,126,0.125)
		}
		
		.btn-primary
		{
			color: #fff;
			background-color: #3f6ad8;
			border-color: #3f6ad8
		}
		
		.btn
		{
			font-size: 0.8rem;
			outline: none !important;
			position: relative;
			transition: color 0.15s,background-color 0.15s,border-color 0.15s,box-shadow 0.15s
		}
		
		.card-body
		{
			flex: 1 1 auto;
			padding: 1.25rem
		}
		.card-body p
		{
			font-size: 13px
		}
		
		a
		{
			color: #E91E63;
			text-decoration: none !important;
			background-color: transparent
		}
		
		.media img
		{
			width: 40px;
			height: auto
		}	
	</style>
</head>
<body>


	{% if session.get("name") %}
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<a href="/"><img src="/static/student-discussion-logo.png" style="height:75px;width:75px;"></img>&nbsp;&nbsp;</a>
			<a class="navbar-brand" href="/">Student Discussion</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
				<div class="navbar-nav">
					<a class="nav-item nav-link" href="/">Home <span class="sr-only">(current)</span></a>
					<a class="nav-item nav-link" href="/student_profile">Profile</a>
					<a class="nav-item nav-link" href="/logout">Log Out</a>
				</div>
			</div>

		</nav>

	{% else %}

		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<a href="/"><img src="/static/student-discussion-logo.png" style="height:75px;width:75px;"></img>&nbsp;&nbsp;</a>
		<a class="navbar-brand" href="/">Student Discussion</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
			<div class="navbar-nav">
				<a class="nav-item nav-link" href="/">Home <span class="sr-only">(current)</span></a>
				<a class="nav-item nav-link" href="/login_account">Sign In</a>
				<a class="nav-item nav-link" href="/register_account">Register</a>
			</div>
		</div>

		</nav>
	{% endif %}

	<div class="container-fluid mt-95">
		<h1>{{ post_title }}</h1><br>
		 <div class="row">
			 <div class="col-md-12">
				 <div class="card mb-4">
					 <div class="card-header">
						 <div class="media flex-wrap w-100 align-items-center"> <img src="/static/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg" class="d-block ui-w-40 rounded-circle" alt="">
							{% if collection_info|length > 0 %}
								{% for document in collection_info %} 
									{% if content_post == document.content_of_post %}
										<div class="media-body ml-3"> <a href="{{url_for('viewing_profile', student_profile_email=document.author_of_post)}}" data-abc="true">{{ document.author_of_post }}</a>
											<div class="text-muted small">0 days ago</div>
										</div>
									{% endif %}
								{% endfor %}
							{% endif %}
	 	


							<div class="text-muted small ml-3">
								 <div>Member since <strong>{{ registration_date_user }}</strong></div>
								 <div><strong>1</strong> posts</div>
							</div>
						 </div>
					 </div>
					 <div class="card-body">
                        {{ content_post }}
					 </div>
					 <div class="card-footer d-flex flex-wrap justify-content-between align-items-center px-0 pt-0 pb-3">
						 <div class="px-4 pt-3"> <a href="javascript:void(0)" class="text-muted d-inline-flex align-items-center align-middle" data-abc="true"> <i class="fa fa-heart text-danger"></i>&nbsp; <span class="align-middle">0</span> </a> <span class="text-muted d-inline-flex align-items-center align-middle ml-4"> <i class="fa fa-eye text-muted fsize-3"></i>&nbsp; <span class="align-middle">0</span> </span> </div>
					 </div>
				 </div>
			 </div>
		 </div>
	 </div>
	
	
	{% if collection_info|length > 0 %}
		{% for document in collection_info %}
			{% if content_post == document.content_of_post %}
				{% if document.comments != [] %}
	 				{% for reply in document.comments %}

						<div class="container-fluid mt-95">
							<div class="row">
								<div class="col-md-12">
									<div class="card mb-4">
										<div class="card-header">
											<div class="media flex-wrap w-100 align-items-center"> <img src="/static/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg" class="d-block ui-w-40 rounded-circle" alt="">

												<div class="media-body ml-3"> <a href="{{url_for('viewing_profile', student_profile_email=document.author_of_post)}}" data-abc="true">{{ reply.author_of_post }}</a>
													<div class="text-muted small">0 days ago</div>
												</div>

											<div class="text-muted small ml-3">
													<div>Member since <strong>{{ registration_date_user }}</strong></div>
													<div><strong>1</strong> posts</div>
											</div>
											</div>
										</div>
										<div class="card-body">
											{{ reply.content_of_post }}
										</div>
										<div class="card-footer d-flex flex-wrap justify-content-between align-items-center px-0 pt-0 pb-3">
											<div class="px-4 pt-3"> <a href="javascript:void(0)" class="text-muted d-inline-flex align-items-center align-middle" data-abc="true"> <i class="fa fa-heart text-danger"></i>&nbsp; <span class="align-middle">0</span> </a> <span class="text-muted d-inline-flex align-items-center align-middle ml-4"> <i class="fa fa-eye text-muted fsize-3"></i>&nbsp; <span class="align-middle">0</span> </span> </div>
										</div>
									</div>
								</div>
							</div>
						</div>
					{% endfor %}

				{% endif %}
			{% endif %}
		{% endfor %}
	{% endif %}
	
	{% if session.get("name") %}
	 <div class="container-fluid mt-95">
		<form id="replying_to_post" action="{{url_for('reply_to_the_post', post_id=_id)}}" onsubmit="return reply_to_post()" method="post" enctype="multipart/form-data">
		<div class="row">
			<div class="col-md-12">
				<div class="card mb-4">
					<div class="card-body">
					   <textarea name="reply_content" id="reply_content"></textarea>
					</div>
					<div class="card-footer d-flex flex-wrap justify-content-between align-items-center px-0 pt-0 pb-3">
						<div class="px-4 pt-3"> <button type="submit" class="btn btn-primary" onclick="return reply_to_post()"><i class="ion ion-md-create"></i>Reply</button> </div>
					</div>
				</div>
			</div>
		</div>
		</form>
	 </div>

	 {% endif %}
	 <script src="{{url_for('static', filename='main.js')}}"></script>
</body>
</html>